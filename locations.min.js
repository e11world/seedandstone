const points=[{id:0,latitude:49.1483933,longitute:-122.0085082,class:"loc-1",title:"Lickman Rd,<br> Chilliwack",desc:"8050 Lickman Rd #103<br>Chilliwack, BC V2R 0Y3<br>604-392-7772"},{id:1,latitude:49.035227,longitute:-122.7846575,class:"loc-2",title:"Marine Drive,<br> Whiterock",desc:"Marine Drive, Whiterock<br>Coming Soon"},{id:3,latitude:48.423631,longitute:-123.367193,class:"loc-4",title:"Gordon Street,<br> Victoria",desc:"901 Gordon St<br>Victoria, BC V8W 3P9<br>250-590-7583"},{id:4,latitude:48.424945,longitute:-123.367363,class:"loc-5",title:"Fort Street,<br> Victoria",desc:"Fort Street, Victoria<br>Coming Soon"},{id:5,latitude:49.1706821,longitute:-122.9479117,class:"loc-6",title:"Chestler Road,<br> Delta",desc:"Chestler Rd, Delta<br>Coming Soon"}],names={0:"Lickman Rd, Chilliwack",1:"Marine Drive, Whiterock",3:"Gordon Street, Victoria",4:"Fort Street, Victoria",5:"Chestler Rd, Delta"};var side_bar_html="",gmarkers=[],marker,myOptions={center:new google.maps.LatLng(48.933917,-122.630434),zoom:9,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.ROADMAP},map=new google.maps.Map(document.getElementById("map_canvas"),myOptions),t=1;function initialize(){let markerPoint,marker;google.maps.event.addListener(map,"click",(function(){infowindow.close()})),points.map(markerPoint=>{markerPoint=new google.maps.LatLng(markerPoint.latitude,markerPoint.longitute),marker=createMarker(markerPoint,`<div class="location ${markerPoint.class}"><div class="location-info"> <h2>${markerPoint.title}</h2> <p>${markerPoint.desc}</p></div></div>`)}),initSearchBox(map,"search_store")}var infowindow=new google.maps.InfoWindow({size:new google.maps.Size(150,50)});function myclick(i){google.maps.event.trigger(gmarkers[i],"click")}function initSearchBox(map,controlId){var input=document.getElementById(controlId),searchBox=new google.maps.places.SearchBox(input,{types:["geocode"],rankBy:google.maps.places.RankBy.DISTANCE});google.maps.event.addListener(searchBox,"places_changed",(function(){var places=searchBox.getPlaces();if(0===places.length)return;var place=places[0],infowindow=new google.maps.InfoWindow({size:new google.maps.Size(150,50),content:place.info});document.getElementById("side_bar").innerHTML=side_bar_html,t-=1,map.fitBounds(place.geometry.viewport);var location=place.geometry.location,lat=location.lat(),lng=location.lng();function calculateDistance(lat1,lon1,lat2,lon2){if(lat1===lat2&&lon1===lon2)return 0;var radlat1=Math.PI*lat1/180,radlat2=Math.PI*lat2/180,radlon1=Math.PI*lon1/180,radlon2=Math.PI*lon2/180,theta=lon1-lon2,radtheta=Math.PI*theta/180,dist=Math.sin(radlat1)*Math.sin(radlat2)+Math.cos(radlat1)*Math.cos(radlat2)*Math.cos(radtheta);return dist>1&&(dist=1),dist=60*(dist=180*(dist=Math.acos(dist))/Math.PI)*1.1515,dist*=1.609344}let result=[],resultDiv=document.getElementById("side_bar");for(let i=0;i<points.length;i++){let point=points[i],distance=calculateDistance(point.latitude,point.longitute,lat,lng);result.push({name:names[point.id],distance:Math.round(distance),title:point.title,desc:point.desc,class:point.class})}result.sort((function(a,b){return a.distance-b.distance})),result.map(p=>{resultDiv.innerHTML+=`<div class="location ${p.class}"><div class="location-info"> <h2>${p.title}</h2> <p>${p.desc}</p></div></div>`})}))}function createMarker(latlng,name,html){var contentString=html,marker=new google.maps.Marker({position:latlng,animation:google.maps.Animation.DROP,map:map});google.maps.event.addListener(marker,"click",(function(){infowindow.setContent(contentString),infowindow.open(map,marker)})),gmarkers.push(marker)}google.maps.event.addListenerOnce(map,"idle",initialize),$("#directions-form .directions-input").keydown((function(e){if(13==e.keyCode)return!1}));